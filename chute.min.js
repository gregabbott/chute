const chute=(()=>{/*https://gregabbott.github.io/chute By + (C) Greg Abbott 2024. V: 2024-12-01*/const e=[],n=(...e)=>{throw new Error(e)},t=e=>e instanceof Function,r=e=>"number"==typeof e&&!isNaN(e),i=e=>Array.isArray(e),o=e=>t(globalThis[e]),f=new Map,l=(i,...o)=>function({seed:i,fns:o}){let f=null,l=null;const u=e=>{l&&l(e),f=e},s=()=>f;function h(n,t){return e.push(t),y}function p(i,o,h){if(0==e.length)return 0===h.length?s():(u(c(h,s())),y);let p=e.length-1;return e.reduce(((i,o,y)=>e.length>1&&y!==p?("log"==o?console.log(s()):"if"==o?n(".if needs 2 arguments"):"tap"==o?n(".tap needs 1 fn argument"):"do"===o?n(".do needs 1+ arguments"):r(Number(o))?u(f[o]):o&&u(d(s(),o,[])),i):(1!==e.length&&y!==p||("log"==o?console.log(...h,s()):"with"==o?null!==l?n("already set up. 1 with per chute"):1===h.length&&t(h[0])?(l=h[0],l(f)):n("with accepts v=>your_variable=v"):"if"==o?u((({when:e,then:n,data:r})=>{let i=e;t(e)&&(a(e),i=g(e,r,[]));if(i&&t(n))return a(n),g(n,r,[]);if(i)return n;return r})({when:h[0],then:h[1],data:s()})):"tap"==o?t(h[0])?h[0](s()):n("give .tap a fn to send data to"):"do"===o?u(c(h,s())):r(Number(o))?(u(f[o]),u(c(h,s()))):o&&u(d(s(),o,h)),e.length=0),i)),y)}let y=new Proxy((()=>{}),{get:h,apply:p});u(i),o.length>0&&u(c(o,i));return y}({seed:i,fns:o}),u={};function a(e){return e.name&&!o(e.name)&&(f.has(e.name)||f.set(e.name,e)),e}function s(e,n){if("log"===n)return console.log(e),e;if(t(n))return a(n),n(e);if((r=n)&&"object"==typeof r&&!Array.isArray(r)&&function(e){const n=Object.keys(e),t=e=>0 in e&&1 in e;if(!("if"in e&&i(e.if)&&t(e.if)))return!1;const r=("else"in e)+("else_if"in e);if("else_if"in e){if(!i(e.else_if))return!1;if(e.else_if.length>0&&!e.else_if.every((e=>i(e)&&t(e))))return!1}return 0==n.length-1-r&&r<=2}(n)){let r=function(e,n){function r({condition:e,data:n}){return t(e)?e(n):e}if([e.if,...e.else_if].forEach((([e,n])=>{t(e)&&a(e),t(n)&&a(n)})),r({condition:e.if[0],data:n}))return e.if[1];if("else_if"in e)for(const[t,i]of e.else_if)if(r({condition:t,data:n}))return i;return"else"in e?e.else:n}(n,e);return e===r?e:t(r)?g(r,e,[]):r}var r;return n}l.x=u;const c=(e,n)=>e.reduce(s,n),h=new Set(["forEach","push","unshift"]),g=(e,n,t)=>{if(0===t.length)return e(n);let r=t.indexOf(u);return-1!==r?(t[r]=n,e(...t)):e(...t)(n)},d=(e,r,i)=>{if(l=e,a=r,t(Object.getPrototypeOf(l)[a])){let n=i.indexOf(u);-1!==n&&(i[n]=e);let t=e[r](...i);return h.has(r)?e:t}var l,a;if(o(r)){let n=globalThis[r];return g(n,e,i)}return f.has(r)?g(f.get(r),e,i):(n(`Data lacks "${r}" and not a global function`),e)};return l})();